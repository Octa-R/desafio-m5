function e(e,n,t,o){Object.defineProperty(e,n,{get:t,set:o,enumerable:!0,configurable:!0})}var n="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof global?global:{},t={},o={},s=n.parcelRequire9acc;null==s&&((s=function(e){if(e in t)return t[e].exports;if(e in o){var n=o[e];delete o[e];var s={id:e,exports:{}};return t[e]=s,n.call(s.exports,s,s.exports),s.exports}var i=new Error("Cannot find module '"+e+"'");throw i.code="MODULE_NOT_FOUND",i}).register=function(e,n){o[e]=n},n.parcelRequire9acc=s),s.register("27Lyk",(function(n,t){var o,s;e(n.exports,"register",(()=>o),(e=>o=e)),e(n.exports,"resolve",(()=>s),(e=>s=e));var i={};o=function(e){for(var n=Object.keys(e),t=0;t<n.length;t++)i[n[t]]=e[n[t]]},s=function(e){var n=i[e];if(null==n)throw new Error("Could not resolve bundle with id "+e);return n}})),s("27Lyk").register(JSON.parse('{"dZpbI":"index.4db57bee.js","fPM4J":"fondo.8924b26a.png","32Ohy":"papel.5f79bbf0.svg","9LjuC":"piedra.c88f7ccf.svg","ESzVr":"tijera.6a2fdda1.svg","jVFQj":"lose.9846907e.svg","4ibW6":"win.925a67b3.svg","YBPdI":"empate.dba76c49.svg"}'));var i;function r({goTo:e}){class n extends HTMLElement{constructor(){super(),this.shadow=this.attachShadow({mode:"open"})}connectedCallback(){this.render()}addListeners(){this.shadow.querySelector("btn-component")?.addEventListener("click",(n=>{e("/instructions")}))}render(){this.shadow.innerHTML='\n        <main class="main">\n          <text-component type="title" text="Piedra Papel o Tijera"></text-component>\n          <btn-component text="Empezar"></btn-component>\n          <div class="hands-container">\n            <hand-component type="tijeras" ></hand-component>\n            <hand-component type="piedra" ></hand-component>\n            <hand-component type="papel" ></hand-component>\n          </div>\n        </main>\n      ';const e=document.createElement("style");e.innerHTML=`\n        .main {\n          box-sizing:border-box;\n          height:100vh;\n          background-color: #eee;\n          background-image: url("${i}");\n          padding:100px 25px;\n          display:flex;\n          flex-direction:column;\n          align-items:stretch;\n          justify-content: space-between;\n        }\n        .hands-container {\n          height:50px;\n          width:100%;\n        }\n      `,this.addListeners(),this.shadow.appendChild(e)}}customElements.define("welcome-page",n)}function a({goTo:e}){class n extends HTMLElement{constructor(){super(),this.shadow=this.attachShadow({mode:"open"})}connectedCallback(){this.render()}addListeners(){this.shadow.querySelector("btn-component")?.addEventListener("click",(n=>{e("/game")}))}render(){const e=document.createElement("style");e.innerHTML=`\n        .main {\n          box-sizing:border-box;\n          height:100vh;\n          background-color: #eee;\n          background-image: url("${i}");\n          padding:100px 25px;\n          display:flex;\n          flex-direction:column;\n          align-items:center;\n          justify-content: space-between;\n        }\n      `;this.shadow.innerHTML='\n      <main class="main">\n        <text-component \n          type="p" \n          text="Presioná jugar y elegí: piedra, papel o tijera antes de que pasen los 3 segundos.">\n        </text-component>\n        <btn-component text="¡Jugar!">\n        </btn-component>\n\n        <hand-component type="tijeras" >\n        </hand-component>\n\n        <hand-component type="piedra" >\n        </hand-component>\n        \n        <hand-component type="papel" >\n        </hand-component>\n      </main>\n    ',this.addListeners(),this.shadow.appendChild(e)}}customElements.define("instructions-page",n)}i=new URL(s("27Lyk").resolve("fPM4J"),import.meta.url).toString();const c=["tijeras","papel","piedra"],d={data:{game:{player:[],computer:[],results:[]}},listeners:[],storage:new class{save(e,n){localStorage.setItem(e,JSON.stringify(n))}get(e){const n=localStorage.getItem(e)||"undefined";return"undefined"!=n?JSON.parse(n):{data:{}}}},init(){console.log("state init");const{data:e}=this.storage.get("saved-state"),n={...this.data.game,...e};this.setState(n)},setState(e){this.data=e,this.storage.save("saved-state",e);for(const e of this.listeners)e(this.getState())},getState(){return this.storage.get("saved-state")},subscribe(e){this.listeners.push(e)},move(e){const n=this.getState();n.player.push(e);const t=this.getComputerMove();n.computer.push(t);const o=this.whoWins(t,e);n.results.push(o),this.setState(n)},getComputerMove(){const e=Math.floor(3*Math.random());return c[e]},whoWins:(e,n)=>e===n?0:"tijeras"===e?"papel"===n?-1:1:"papel"===e?"piedra"===n?-1:1:"piedra"===e?"tijeras"===n?-1:1:void 0,matchResult(e){const n=e.reduce(((e,n)=>e+n));return 0==n?"empate":n>0?"player":"computer"},getComputerScore(){return this.getState().results.reduce(((e,n)=>n<0?e+1:e),0)},getPlayerScore(){return this.getState().results.reduce(((e,n)=>n>0?e+1:e),0)},getLastResult(){return this.getState().results.at(-1)},resetResults(){this.setState({player:[],computer:[],results:[]})}};function h({goTo:e}){class n extends HTMLElement{constructor(){super(),this.shadow=this.attachShadow({mode:"open"})}connectedCallback(){this.render()}addListeners(){this.shadow.querySelectorAll("hand-component").forEach((e=>{e.addEventListener("player-move",(e=>{const{detail:n}=e,t=n.move;d.move(t)}))}));this.shadow.querySelector("counter-component").addEventListener("finished",(e=>{this.showHandsAnimation()}))}showHandsAnimation(){const n=this.shadow.querySelector(".main");n.innerHTML="";const t=d.getState();n.innerHTML=`\n      <hand-component \n        size="lg"\n        position="up" \n        type="${t.computer.at(-1)}">\n      </hand-component>\n      <hand-component \n        size="lg"\n        showing="true"\n        position="bottom"\n        type="${t.player.at(-1)}">\n      </hand-component>\n      `,setTimeout((()=>{e("/game-over")}),2e3)}render(){const e=document.createElement("style");e.innerHTML=`\n        .main {\n          box-sizing:border-box;\n          height:100vh;\n          background-color: #eee;\n          background-image: url("${i}");\n          padding:100px 25px;\n          display:flex;\n          flex-direction:column;\n          align-items:center;\n          justify-content: space-between;\n        }\n\n        .hands-container {\n          height:50px;\n          width:50px;\n        }\n\n        .top-hand {\n\n        }\n\n        .bottom-hand {}\n      `,this.shadow.innerHTML='\n        <main class="main">\n          <counter-component count="3"></counter-component>\n          <div class="hands-container">\n            <hand-component size="md" type="tijeras" ></hand-component>\n            <hand-component size="md" type="piedra" ></hand-component>\n            <hand-component size="md" type="papel" ></hand-component>\n          </div>\n        </main>\n      ',this.addListeners(),this.shadow.appendChild(e)}}customElements.define("game-page",n);return document.createElement("game-page")}function l({goTo:e}){class n extends HTMLElement{constructor(){super(),this.shadow=this.attachShadow({mode:"open"}),d.subscribe((e=>{this.render()}))}connectedCallback(){const e=window.setTimeout((()=>{for(let n=e;n>=0;n--)window.clearInterval(n)}),0);this.render()}addListeners(){this.shadow.querySelector(".jugar")?.addEventListener("click",(()=>{e("/game")}));this.shadow.querySelector(".reset-btn")?.addEventListener("click",(()=>{d.resetResults()}))}render(){const e=document.createElement("style");e.innerHTML=`\n        .main {\n          box-sizing:border-box;\n          height:100vh;\n          background-color: #eee;\n          background-image: url("${i}");\n          padding:50px 25px;\n          display:flex;\n          flex-direction:column;\n          align-items:center;\n          justify-content: space-between;\n        }\n      `,this.playerScore=d.getPlayerScore(),this.computerScore=d.getComputerScore();const n=d.getState().results.at(-1)||0;this.starType=n>0?"win":n<0?"lose":"empate",this.shadow.innerHTML=`\n        <main class="main">\n          <star-component type="${this.starType}">\n          </star-component>\n          <score-component \n            player="${this.playerScore}"\n            computer="${this.computerScore}"\n          >\n          </score-component>\n          <btn-component class="jugar" text="Volver a Jugar">\n          </btn-component>\n          <btn-component class="reset-btn" text="Reset">\n          </btn-component>\n\n        </main>\n      `,this.addListeners(),this.shadow.appendChild(e)}}customElements.define("game-over",n)}const p=[{path:/\//,component:()=>document.createElement("welcome-page")},{path:/\/welcome/,component:()=>document.createElement("welcome-page")},{path:/\/instructions/,component:()=>document.createElement("instructions-page")},{path:/\/game/,component:()=>document.createElement("game-page")},{path:/\/game-over/,component:()=>document.createElement("game-over")}];function m(e){function n(e){history.pushState({},"",e),t(e)}function t(n){for(const t of p)if(t.path.test(n)){const n=t.component();e.firstChild&&e.firstChild.remove(),e.appendChild(n)}}l({goTo:n}),a({goTo:n}),r({goTo:n}),h({goTo:n}),t(location.pathname)}class u extends HTMLElement{constructor(){super(),this.shadow=this.attachShadow({mode:"open"}),this.text=this.getAttribute("text")||""}connectedCallback(){this.render()}render(){const e=document.createElement("style");e.innerHTML="\n    .container {\n      width:100%;\n      display:flex;\n      align-items:center;\n      justify-content-center;\n    }\n      .button {\n        font-family:'Odibee Sans', cursive;\n        height:84px;\n        width:368px;\n        background-color: var(--azul-claro);\n        border: 10px solid var(--azul-oscuro);\n        border-radius: 10px;\n        color: #eee;\n        font-size: 45px;\n        margin:0 auto;\n      }\n    ",this.shadow.innerHTML=`\n    <div class="container">\n      <button class="button" >\n        ${this.text}\n      </button>\n      </div>\n    `,this.shadow.appendChild(e)}}customElements.define("btn-component",u);class g extends HTMLElement{constructor(){super(),this.shadow=this.attachShadow({mode:"open"}),this.count=Number(this.getAttribute("count")||3)}setAnimationCounter(){const e=setTimeout((()=>{this.finishevent(e)}),1e3*this.count);for(let e=0;e<this.count;e++)setTimeout((()=>{const n=this.count-e;this.shadow.querySelector(".number").innerText=n.toString()}),1e3*e)}finishevent(e){window.clearTimeout(e);this.shadow.querySelector(".loading")?.classList.add("hide");const n=new CustomEvent("finished",{detail:{description:"finished counting"}});this.dispatchEvent(n)}connectedCallback(){this.setAnimationCounter(),this.render()}render(){const e=document.createElement("style");e.innerHTML=`\n      .loading {\n        display:flex;\n        justify-content: center;\n        align-items:center;\n      }\n      .hide {\n        display:none;\n      }\n      .loading::after {\n        content: "";\n        width: 240px;\n        height: 240px;\n        border: 20px solid #ddd;\n        border-top-color: #000;\n        border-radius: 50%;\n        animation: loading 1s linear ;\n        animation-iteration-count: ${this.count};\n      }\n      .number {\n        position: absolute;\n        font-size:100px;\n        font-family: 'Odibee Sans', cursive;\n        font-weight:700;\n      }\n      @keyframes loading {\n        to {\n          transform:rotate(1turn);\n        }\n      }\n    `,this.shadow.innerHTML='\n      <div class="loading">\n        <div class="number">\n        </div>\n      </div>\n    ',this.shadow.appendChild(e)}}customElements.define("counter-component",g);var f;f=new URL(s("27Lyk").resolve("32Ohy"),import.meta.url).toString();var w;w=new URL(s("27Lyk").resolve("9LjuC"),import.meta.url).toString();var x;x=new URL(s("27Lyk").resolve("ESzVr"),import.meta.url).toString();class b extends HTMLElement{sizes=["sm","md","lg"];constructor(){super(),this.position=this.getAttribute("position")||"",this.shadow=this.attachShadow({mode:"open"}),this.type=this.getAttribute("type"),this.showing=this.getAttribute("showing")||"","tijeras"===this.type?this.imgUrl=x:"papel"===this.type?this.imgUrl=f:"piedra"===this.type&&(this.imgUrl=w),this.sizes.includes(this.getAttribute("size")||"")&&(this.size=this.getAttribute("size")||"sm")}connectedCallback(){this.render()}addCustomEvent(){this.shadow.querySelector(".img")?.addEventListener("click",(e=>{const n=new CustomEvent("player-move",{detail:{move:this.type}});this.dispatchEvent(n)}))}render(){const e=document.createElement("style");e.innerHTML="\n      .sm {\n        width:57px;\n      }\n\n      .sm.papel {\n        width:67px;\n      }\n\n      .md {\n        width:100px;\n      }\n\n      .md.papel {\n        width:115px;\n      }\n\n      .lg {\n        width:150px;\n      }\n\n      .lg.papel {\n        width:160px;\n      }\n\n      .img {\n        position: fixed;\n        bottom:-30px;\n        cursor:pointer;\n      }\n      .piedra{\n        left: 50%;\n        transform: translate(-50%, 0);\n      }\n\n      .papel{\n        left: 50%;\n        transform: translate(50%, 0);\n      }\n      \n      .tijeras {\n        left: 50%;\n        transform: translate(-160%, 0);\n      }\n\n      .up {\n        top:0;\n        transform: translate(-50%, 0) rotate(0.5turn);\n      }\n      .bottom {\n        right:0;\n        bottom:0;\n        left: 50%;\n        transform: translate(-50%, 0);\n      }\n\n      .centered {\n        left: 50%;\n        transform: translate(-50%, 0);\n      }\n    ",this.shadow.innerHTML=`\n      <img \n        class="img ${this.type} ${this.size} ${this.position} ${this.showing?"centered":""}"\n        src="${this.imgUrl}"\n      >\n    `,this.addCustomEvent(),this.shadow.appendChild(e)}}customElements.define("hand-component",b);class y extends HTMLElement{constructor(){super(),this.shadow=this.attachShadow({mode:"open"}),this.computerScore=Number(this.getAttribute("computer")),this.playerScore=Number(this.getAttribute("player"))}connectedCallback(){this.render()}render(){const e=document.createElement("style");e.innerHTML="\n      .score-board {\n        border: 10px solid #000;\n        border-radius:10px;\n        width:250px;\n        height:220px;\n        background-color: #fff;\n        padding:20px 30px;\n        font-family: 'Odibee Sans';\n      }\n\n      .score {\n        font-size: 55px;\n        text-align:center;\n        margin:10px 10px;\n      }\n\n      .score-text {\n        font-size: 45px;\n        text-align:right;\n        margin: 15px 0;\n      }\n\n    ",this.shadow.innerHTML=`\n    <div class="score-board">\n      <h2 class="score">Score</h2>\n      <div class="score-text">Vos: ${this.playerScore}</div>\n      <div class="score-text" >Máquina ${this.computerScore}</div>\n    </div>`,this.shadow.appendChild(e)}}customElements.define("score-component",y);class v extends HTMLElement{constructor(){super(),this.shadow=this.attachShadow({mode:"open"}),this.type=this.getAttribute("type")||"p",this.text=this.getAttribute("text")||"no hay texto"}connectedCallback(){this.render()}render(){const e=document.createElement("style");e.innerHTML="\n      .text {\n        margin:0 auto;\n        text-align: center;\n        font-family: 'Courier Prime', monospace;\n        max-width:384px;\n        width:100%;\n      }\n\n      .title {\n        color:var(--verde-oscuro);\n        font-size:80px;\n        font-weight: 700;\n      }\n\n      .p {\n        font-size:40px;\n        font-weight: 600;\n        color:var(--negro);\n      }\n    ",this.shadow.innerHTML=`\n      <h2 class="text ${this.type}">\n        ${this.text}\n      </h2>\n    `,this.shadow.appendChild(e)}}customElements.define("text-component",v);var S;S=new URL(s("27Lyk").resolve("jVFQj"),import.meta.url).toString();var L;L=new URL(s("27Lyk").resolve("4ibW6"),import.meta.url).toString();var E;E=new URL(s("27Lyk").resolve("YBPdI"),import.meta.url).toString();class T extends HTMLElement{types=["win","lose","empate"];constructor(){super(),this.shadow=this.attachShadow({mode:"open"}),this.type=this.getAttribute("type")||"lose","win"===this.type?(this.text="Ganaste!",this.imgUrl=L):"lose"===this.type?(this.text="Perdiste!",this.imgUrl=S):"empate"===this.type&&(this.text="Empate!",this.imgUrl=E)}connectedCallback(){this.render()}render(){const e=document.createElement("style");e.innerHTML="\n      .star {\n        margin:0 auto;\n        text-align: center;\n        font-family: 'Courier Prime', monospace;\n        width:250px;\n        max-width:250px;\n        font-size:55px;\n        width:100%;\n      }\n    ",this.shadow.innerHTML=`\n      <img class="star" src="${this.imgUrl}">\n    `,this.shadow.appendChild(e)}}customElements.define("star-component",T),(()=>{d.init();m(document.querySelector(".root"))})();
//# sourceMappingURL=index.4db57bee.js.map
